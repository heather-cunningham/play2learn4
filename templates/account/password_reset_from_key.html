{% extends '_base.html' %}

{% load crispy_forms_tags %}

{% block title %}
  {% if token_fail %}
    Bad Token
  {% else %}
    Change Password
  {% endif %}
{% endblock %}

{% block main %}
<div id="change-pswd-div" class="card border-primary m-auto mb-3" style="max-width: 30rem">
  
  <div id="change-pswd-header" class="card-header text-center">
    {% if token_fail %}
      Bad Token
    {% else %}
      Change Password
    {% endif %}
  </div>
  
  <div id="change-pswd-card" class="card-body">
    {% if token_fail %}
      <p id="reset-link-invalid" class="card-text">
        The password reset link is invalid, or it has been used already. 
        Please request a 
        <a id="reset-link" href="{% url 'account_reset_password' %}">new password reset link</a>.
      </p>
    
    {% else %}
      <form id="change-pswd-form" method="post" class="m-auto">
        {% csrf_token %}

        {{ form|crispy }}

        <button id="change-pswd-btn" type="submit" value="Change Password" name="change-password" 
          class="form-control btn btn-primary" 
          alt="Press to change your password.">Change Password</button>
      </form>
    {% endif %}
  </div>
</div>
{% endblock %}